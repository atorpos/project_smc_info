<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmarTone CARE-CMS System Architecture Diagram</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #0f4c75 0%, #3282b8 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .diagram-container {
            padding: 40px;
            background: #f8f9fa;
        }
        
        .architecture-grid {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .layer {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid;
        }
        
        .client-layer {
            border-left-color: #28a745;
        }
        
        .application-layer {
            border-left-color: #007bff;
        }
        
        .data-layer {
            border-left-color: #dc3545;
        }
        
        .layer h3 {
            margin: 0 0 20px 0;
            font-size: 1.4em;
            color: #2c3e50;
        }
        
        .component {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .component:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .component h4 {
            margin: 0 0 10px 0;
            color: #495057;
            font-size: 1.1em;
        }
        
        .component p {
            margin: 0;
            font-size: 0.9em;
            color: #6c757d;
            line-height: 1.4;
        }
        
        .api-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .api-item {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
        }
        
        .api-item h4 {
            margin: 0 0 10px 0;
            color: #495057;
        }
        
        .collections-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .collection-category {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid;
        }
        
        .home-collections {
            border-left-color: #28a745;
        }
        
        .travel-collections {
            border-left-color: #007bff;
        }
        
        .core-collections {
            border-left-color: #ffc107;
        }
        
        .tip-collections {
            border-left-color: #17a2b8;
        }
        
        .system-collections {
            border-left-color: #6f42c1;
        }
        
        .collection-category h4 {
            margin: 0 0 10px 0;
            color: #495057;
        }
        
        .collection-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .collection-list li {
            padding: 3px 0;
            font-size: 0.9em;
            color: #6c757d;
        }
        
        .flow-diagram {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .flow-step {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 50px;
            padding: 15px 25px;
            text-align: center;
            min-width: 150px;
            position: relative;
        }
        
        .flow-step::after {
            content: '‚Üí';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            color: #007bff;
        }
        
        .flow-step:last-child::after {
            display: none;
        }
        
        .tech-stack {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tech-item {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .security-section {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .security-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .security-item {
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }
        
        .footer {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .architecture-grid {
                grid-template-columns: 1fr;
            }
            
            .flow-steps {
                flex-direction: column;
            }
            
            .flow-step::after {
                content: '‚Üì';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SmarTone CARE-CMS</h1>
            <p>Comprehensive System Architecture & Integration Diagram</p>
        </div>
        
        <div class="diagram-container">
            <div class="architecture-grid">
                <div class="layer client-layer">
                    <h3>üåê Client Layer</h3>
                    <div class="component">
                        <h4>Admin Interface</h4>
                        <p>PayloadCMS Admin Panel for content management</p>
                    </div>
                    <div class="component">
                        <h4>GraphQL Playground</h4>
                        <p>API exploration and testing interface</p>
                    </div>
                    <div class="component">
                        <h4>SmarTone Mobile App</h4>
                        <p>Customer-facing mobile application consuming CMS data</p>
                    </div>
                </div>
                
                <div class="layer application-layer">
                    <h3>‚öôÔ∏è Application Layer</h3>
                    <div class="component">
                        <h4>PayloadCMS Core</h4>
                        <p>Node.js/Express-based headless CMS with TypeScript</p>
                    </div>
                    <div class="component">
                        <h4>REST API</h4>
                        <p>Auto-generated REST endpoints for all collections</p>
                    </div>
                    <div class="component">
                        <h4>GraphQL API</h4>
                        <p>Auto-generated GraphQL schema and resolvers</p>
                    </div>
                    <div class="component">
                        <h4>Approval Plugin</h4>
                        <p>Custom workflow for content approval and publishing</p>
                    </div>
                    <div class="component">
                        <h4>Rich Text Plugin</h4>
                        <p>Enhanced rich text editing capabilities</p>
                    </div>
                </div>
                
                <div class="layer data-layer">
                    <h3>üóÑÔ∏è Data Layer</h3>
                    <div class="component">
                        <h4>MongoDB Cluster</h4>
                        <p>Primary database with replica sets for high availability</p>
                    </div>
                    <div class="component">
                        <h4>File Storage</h4>
                        <p>Static file storage for uploads and assets</p>
                    </div>
                    <div class="component">
                        <h4>Whitelist Storage</h4>
                        <p>CSV file processing and MSISDN whitelist management</p>
                    </div>
                </div>
            </div>
            
            <div class="api-section">
                <h3>üîó API Integrations & External Services</h3>
                <div class="api-grid">
                    <div class="api-item">
                        <h4>Internal SmarTone APIs</h4>
                        <p>‚Ä¢ Customer Management API<br>
                        ‚Ä¢ Billing & Subscription API<br>
                        ‚Ä¢ Product Catalog API<br>
                        ‚Ä¢ Roaming Services API</p>
                    </div>
                    <div class="api-item">
                        <h4>External Partners</h4>
                        <p>‚Ä¢ Relay42 (Personalization)<br>
                        ‚Ä¢ WhatsApp Business API<br>
                        ‚Ä¢ Travel Partner APIs<br>
                        ‚Ä¢ Payment Gateway APIs</p>
                    </div>
                    <div class="api-item">
                        <h4>Authentication Services</h4>
                        <p>‚Ä¢ User Authentication<br>
                        ‚Ä¢ API Key Management<br>
                        ‚Ä¢ Role-based Access Control<br>
                        ‚Ä¢ Session Management</p>
                    </div>
                    <div class="api-item">
                        <h4>File Upload Services</h4>
                        <p>‚Ä¢ Whitelist CSV Processing<br>
                        ‚Ä¢ Media Asset Management<br>
                        ‚Ä¢ Content Delivery Network<br>
                        ‚Ä¢ Static File Serving</p>
                    </div>
                </div>
            </div>
            
            <div class="collections-section">
                <h3>üìä Data Collections & Structures</h3>
                <div class="collections-grid">
                    <div class="collection-category home-collections">
                        <h4>Home & Customer Experience</h4>
                        <ul class="collection-list">
                            <li>Campaigns & Campaign Management</li>
                            <li>Hot Picks & Promotions</li>
                            <li>Notices & Announcements</li>
                            <li>Smart Answers & Support</li>
                            <li>Surveys & Feedback</li>
                            <li>WhatsApp Stickers</li>
                            <li>Retention Configurations</li>
                            <li>Popup Banners</li>
                            <li>Limited Module Offers</li>
                            <li>Flash Sales</li>
                            <li>Voucher Configurations</li>
                            <li>Widget Configurations</li>
                        </ul>
                    </div>
                    
                    <div class="collection-category travel-collections">
                        <h4>Travel & Roaming Services</h4>
                        <ul class="collection-list">
                            <li>Roaming Products & Offers</li>
                            <li>Roaming Product Categories</li>
                            <li>Travel Check Services</li>
                            <li>Prepaid SIM Products</li>
                            <li>Plan Finder (Questions & Results)</li>
                            <li>Roaming VIP Whitelists</li>
                            <li>Hot Search Lists</li>
                        </ul>
                    </div>
                    
                    <div class="collection-category core-collections">
                        <h4>Core Infrastructure</h4>
                        <ul class="collection-list">
                            <li>IDD Destinations & Groups</li>
                            <li>Roaming Destinations & Regions</li>
                            <li>Roaming Tariff Management</li>
                            <li>Payment Methods</li>
                            <li>Discount Prefixes</li>
                            <li>Travel Destinations</li>
                            <li>Force Update Info</li>
                        </ul>
                    </div>
                    
                    <div class="collection-category tip-collections">
                        <h4>Tips & Content</h4>
                        <ul class="collection-list">
                            <li>Tip Categories</li>
                            <li>Tip Contents</li>
                            <li>Tips Management</li>
                            <li>Tip Lists</li>
                        </ul>
                    </div>
                    
                    <div class="collection-category system-collections">
                        <h4>System & Administration</h4>
                        <ul class="collection-list">
                            <li>Users & Authentication</li>
                            <li>Service Types</li>
                            <li>User Account Types</li>
                            <li>Whitelists & MSISDN Management</li>
                            <li>Categories & Tags</li>
                            <li>Items Management</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="flow-diagram">
                <h3>üîÑ Content Workflow & Publishing Process</h3>
                <div class="flow-steps">
                    <div class="flow-step">
                        <strong>Draft Creation</strong><br>
                        <small>Content editors create drafts</small>
                    </div>
                    <div class="flow-step">
                        <strong>Approval Process</strong><br>
                        <small>Role-based approval workflow</small>
                    </div>
                    <div class="flow-step">
                        <strong>Scheduled Publishing</strong><br>
                        <small>Automated publishing with cron jobs</small>
                    </div>
                    <div class="flow-step">
                        <strong>API Distribution</strong><br>
                        <small>Content available via REST/GraphQL</small>
                    </div>
                    <div class="flow-step">
                        <strong>Mobile App</strong><br>
                        <small>Customer-facing application</small>
                    </div>
                </div>
            </div>
            
            <div class="tech-stack">
                <h3>üõ†Ô∏è Technology Stack</h3>
                <div class="tech-grid">
                    <div class="tech-item">
                        <h4>Backend Framework</h4>
                        <p>Node.js 20.12.2<br>Express.js<br>TypeScript</p>
                    </div>
                    <div class="tech-item">
                        <h4>CMS Platform</h4>
                        <p>PayloadCMS 2.5.0<br>Webpack Bundler<br>Slate Rich Text Editor</p>
                    </div>
                    <div class="tech-item">
                        <h4>Database</h4>
                        <p>MongoDB<br>Mongoose ODM<br>Replica Set Configuration</p>
                    </div>
                    <div class="tech-item">
                        <h4>Deployment</h4>
                        <p>Docker Containers<br>Kubernetes<br>Azure Container Registry</p>
                    </div>
                    <div class="tech-item">
                        <h4>APIs</h4>
                        <p>REST API<br>GraphQL<br>Auto-generated Schemas</p>
                    </div>
                    <div class="tech-item">
                        <h4>Internationalization</h4>
                        <p>English & Traditional Chinese<br>Localized Content<br>Fallback Support</p>
                    </div>
                </div>
            </div>
            
            <div class="security-section">
                <h3>üîí Security & Compliance</h3>
                <div class="security-grid">
                    <div class="security-item">
                        <h4>Authentication</h4>
                        <p>API Key Authentication<br>Role-based Access Control<br>Session Management</p>
                    </div>
                    <div class="security-item">
                        <h4>Data Protection</h4>
                        <p>MSISDN Whitelisting<br>Secure File Upload<br>Data Validation</p>
                    </div>
                    <div class="security-item">
                        <h4>Network Security</h4>
                        <p>TLS/SSL Encryption<br>MongoDB TLS<br>Secure API Endpoints</p>
                    </div>
                    <div class="security-item">
                        <h4>Environment Isolation</h4>
                        <p>Separate UAT/Production<br>Environment Variables<br>Secret Management</p>
                    </div>
                </div>
            </div>
            
            <div class="api-section">
                <h3>üåç Deployment Environments</h3>
                <div class="api-grid">
                    <div class="api-item">
                        <h4>Production Environment</h4>
                        <p><strong>URL:</strong> https://care-cms.smartone.com<br>
                        <strong>Database:</strong> MongoDB Cluster (4 replicas)<br>
                        <strong>Replicas:</strong> 4 instances<br>
                        <strong>Resources:</strong> 1000m CPU, 1536Mi Memory</p>
                    </div>
                    <div class="api-item">
                        <h4>Staging Environment</h4>
                        <p><strong>URL:</strong> https://carestg-cms.smartone.com<br>
                        <strong>Database:</strong> MongoDB Cluster (3 replicas)<br>
                        <strong>Replicas:</strong> 2 instances<br>
                        <strong>Resources:</strong> 500m CPU, 512Mi Memory</p>
                    </div>
                    <div class="api-item">
                        <h4>UAT Environment</h4>
                        <p><strong>URL:</strong> https://stcare-cms-uat.smartone.com<br>
                        <strong>Database:</strong> MongoDB with TLS<br>
                        <strong>Replicas:</strong> 2 instances<br>
                        <strong>Resources:</strong> 500m CPU, 512Mi Memory</p>
                    </div>
                    <div class="api-item">
                        <h4>Automated Publishing</h4>
                        <p><strong>Cron Jobs:</strong> Every minute publishing<br>
                        <strong>Endpoint:</strong> /approval/publish<br>
                        <strong>Function:</strong> Auto-publish scheduled content<br>
                        <strong>Tool:</strong> Alpine Curl container</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>SmarTone CARE-CMS v1.9.0 | System Architecture Documentation | Generated on September 10, 2025</p>
        </div>
    </div>
</body>
</html>
